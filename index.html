<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="apple-mobile-web-app-title" content="Weight Loss">
  <meta name="theme-color" content="#6366f1">
  
  <title>Weight Loss Journey - David & Amanda</title>
  
  <link rel="manifest" href="/manifest.json">
  
  <script src="https://cdn.tailwindcss.com"></script>
  <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
  <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
  
  <style>
    body {
      margin: 0;
      padding: 0;
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', sans-serif;
    }
  </style>
</head>
<body>
  <div id="root"></div>

  <!-- Load Recharts AFTER React -->
  <script src="https://unpkg.com/recharts@2.5.0/dist/Recharts.js"></script>
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

  <script type="text/babel">
    // Wait for everything to load
    (function() {
      // Check if libraries are ready
      const waitForLibraries = setInterval(() => {
        if (window.React && window.ReactDOM && window.Recharts && window.Babel) {
          clearInterval(waitForLibraries);
          initApp();
        }
      }, 100);
      
      function initApp() {
        const { useState, useEffect } = React;
        const { LineChart, Line, XAxis, YAxis, CartesianGrid, Tooltip, Legend, ResponsiveContainer, BarChart, Bar, PieChart, Pie, Cell, AreaChart, Area } = Recharts;
        
        const BEACH_IMAGE = "data:image/svg+xml,%3Csvg width='1000' height='400' xmlns='http://www.w3.org/2000/svg'%3E%3Cdefs%3E%3ClinearGradient id='sky' x1='0%25' y1='0%25' x2='0%25' y2='100%25'%3E%3Cstop offset='0%25' style='stop-color:%2387CEEB;stop-opacity:1' /%3E%3Cstop offset='100%25' style='stop-color:%23E0F2FE;stop-opacity:1' /%3E%3C/linearGradient%3E%3C/defs%3E%3Crect width='1000' height='400' fill='url(%23sky)'/%3E%3Ccircle cx='900' cy='80' r='60' fill='%23FDB713' opacity='0.9'/%3E%3Cellipse cx='500' cy='350' rx='600' ry='100' fill='%23F0E68C' opacity='0.8'/%3E%3Cpath d='M 0 300 Q 100 280, 200 300 Q 300 320, 400 300 Q 500 280, 600 300 Q 700 320, 800 300 Q 900 280, 1000 300 L 1000 400 L 0 400 Z' fill='%230B7285' opacity='0.7'/%3E%3C/svg%3E";
        
        const WeightLossJourney = () => {
          const [activeTab, setActiveTab] = useState('dashboard');
          const [activeUser, setActiveUser] = useState('david');
          const [loading, setLoading] = useState(false);
          
          const [userData, setUserData] = useState({
            david: {
              name: 'David',
              startWeight: 283,
              currentWeight: 283,
              targetWeight: 231,
              finalGoal: 210,
              heightInches: 70,
              calorieTarget: 1700,
              proteinTarget: 180,
              waterTarget: 3000,
              exerciseGoal: 60,
              photos: [],
              dailyLogs: [],
              workoutsCompleted: []
            },
            amanda: {
              name: 'Amanda',
              startWeight: 0,
              currentWeight: 0,
              targetWeight: 0,
              heightInches: 65,
              calorieTarget: 1500,
              proteinTarget: 120,
              waterTarget: 2500,
              exerciseGoal: 45,
              photos: [],
              dailyLogs: [],
              workoutsCompleted: []
            }
          });

          const saveData = (newData) => {
            setUserData(newData);
            localStorage.setItem('weight-loss-data', JSON.stringify(newData));
          };

          useEffect(() => {
            try {
              const saved = localStorage.getItem('weight-loss-data');
              if (saved) {
                setUserData(JSON.parse(saved));
              }
            } catch (error) {
              console.log('Starting fresh');
            }
          }, []);

          const currentUser = userData[activeUser];
          const holidayDate = new Date('2026-05-14');
          const startDate = new Date('2026-01-03');
          const today = new Date();
          const daysToHoliday = Math.ceil((holidayDate - today) / (1000 * 60 * 60 * 24));
          const weekNumber = Math.ceil((today - startDate) / (1000 * 60 * 60 * 24 * 7));

          const quotes = [
            "Every workout is progress. Every meal is a choice. Every day is a fresh start.",
            "The only impossible journey is the one you never begin.",
            "Success is the sum of small efforts repeated day in and day out.",
            "Your body can stand almost anything. It's your mind you have to convince.",
            "Don't wish for it. Work for it."
          ];

          const [currentQuote, setCurrentQuote] = useState(quotes[0]);

          useEffect(() => {
            const quoteInterval = setInterval(() => {
              setCurrentQuote(quotes[Math.floor(Math.random() * quotes.length)]);
            }, 30000);
            return () => clearInterval(quoteInterval);
          }, []);

          if (loading) {
            return (
              <div className="min-h-screen bg-gradient-to-br from-indigo-900 via-purple-900 to-pink-800 flex items-center justify-center">
                <div className="text-white text-2xl">Loading...</div>
              </div>
            );
          }

          return (
            <div className="min-h-screen bg-gradient-to-br from-indigo-900 via-purple-900 to-pink-800">
              {/* Header with Beach Countdown */}
              <div className="relative backdrop-blur-md bg-white/10 border-b border-white/20 shadow-2xl">
                <div className="max-w-7xl mx-auto px-4 py-4">
                  <div className="flex items-center justify-between mb-4">
                    <h1 className="text-2xl font-extrabold text-white">Weight Loss Journey</h1>
                    <div className="flex gap-3">
                      <button
                        onClick={() => setActiveUser('david')}
                        className={`px-6 py-2 rounded-xl font-bold transition-all ${activeUser === 'david' ? 'bg-gradient-to-r from-blue-500 to-blue-600 text-white shadow-lg' : 'bg-white/20 text-white'}`}
                      >
                        David
                      </button>
                      <button
                        onClick={() => setActiveUser('amanda')}
                        className={`px-6 py-2 rounded-xl font-bold transition-all ${activeUser === 'amanda' ? 'bg-gradient-to-r from-pink-500 to-pink-600 text-white shadow-lg' : 'bg-white/20 text-white'}`}
                      >
                        Amanda
                      </button>
                    </div>
                  </div>

                  <div className="relative rounded-3xl overflow-hidden shadow-2xl h-64"
                       style={{backgroundImage: `url(${BEACH_IMAGE})`, backgroundSize: 'cover', backgroundPosition: 'center'}}>
                    <div className="absolute inset-0 flex items-center justify-center">
                      <div className="text-center">
                        <div className="text-8xl font-extrabold mb-2 text-white" style={{textShadow: '0 4px 8px rgba(0,0,0,0.8)'}}>{daysToHoliday}</div>
                        <p className="text-2xl font-semibold text-white" style={{textShadow: '0 4px 8px rgba(0,0,0,0.8)'}}>days until paradise</p>
                        <p className="text-xl text-white mt-2" style={{textShadow: '0 4px 8px rgba(0,0,0,0.8)'}}>May 14th, 2026 ğŸŒ´</p>
                      </div>
                    </div>
                  </div>
                </div>
              </div>

              {/* Navigation Tabs */}
              <div className="bg-gradient-to-r from-slate-800 via-slate-900 to-slate-800 border-b-2 border-white/20 sticky top-0 z-40">
                <div className="max-w-7xl mx-auto px-4 py-2">
                  <div className="flex flex-wrap justify-center gap-2">
                    {[
                      { id: 'dashboard', label: 'Dashboard', icon: 'ğŸ“Š' },
                      { id: 'bmi', label: 'BMI', icon: 'ğŸ“' },
                      { id: 'photos', label: 'Photos', icon: 'ğŸ“¸' },
                      { id: 'workouts', label: 'Workouts', icon: 'ğŸ’ª' },
                      { id: 'meals', label: 'Meals', icon: 'ğŸ½ï¸' },
                      { id: 'checkin', label: 'Check-In', icon: 'âœ…' },
                      { id: 'progress', label: 'Progress', icon: 'ğŸ“ˆ' }
                    ].map((tab) => (
                      <button
                        key={tab.id}
                        onClick={() => setActiveTab(tab.id)}
                        className={`flex items-center gap-2 px-4 py-3 rounded-xl font-bold transition-all ${activeTab === tab.id ? 'bg-gradient-to-br from-purple-600 to-pink-600 text-white shadow-2xl scale-105' : 'bg-white/10 text-white/70 hover:bg-white/20'}`}
                      >
                        <span className="text-xl">{tab.icon}</span>
                        <span className="text-xs">{tab.label}</span>
                      </button>
                    ))}
                  </div>
                </div>
              </div>

              {/* Quote Section */}
              <div className="text-center py-6 px-4">
                <p className="text-white text-xl font-bold italic drop-shadow-lg">"{currentQuote}"</p>
              </div>

              {/* Content Area */}
              <div className="max-w-7xl mx-auto px-4 py-8">
                <div className="bg-white/10 backdrop-blur-md rounded-2xl shadow-2xl p-8 border border-white/20">
                  <h2 className="text-3xl font-extrabold text-white mb-6 text-center">
                    {activeTab === 'dashboard' && 'ğŸ“Š Dashboard'}
                    {activeTab === 'bmi' && 'ğŸ“ BMI Tracker'}
                    {activeTab === 'photos' && 'ğŸ“¸ Photo Progress'}
                    {activeTab === 'workouts' && 'ğŸ’ª Workout Plan'}
                    {activeTab === 'meals' && 'ğŸ½ï¸ Meal Planning'}
                    {activeTab === 'checkin' && 'âœ… Daily Check-In'}
                    {activeTab === 'progress' && 'ğŸ“ˆ Progress Charts'}
                  </h2>
                  <div className="text-white text-center text-lg">
                    {activeTab.charAt(0).toUpperCase() + activeTab.slice(1)} content will appear here
                  </div>
                </div>
              </div>
            </div>
          );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<WeightLossJourney />);
      }
    })();
  </script>
</body>
</html>
